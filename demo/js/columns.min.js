$.zepto&&!$.fn.removeData&&console.log("Error: Zepto is loaded without the data module."),$.fn.columns=function(a){function b(a){a=a||{};var b=this,e={namespace:"columns",height:b.height(),width:b.width(),top:b.offset().top,left:b.offset().left,win:g.height(),winW:g.width(),cols:4,columnHeights:[],columnTemplate:'<div class="column">{{ content }}</div>',autoWidth:!0,createColumns:!0,proportionalScroll:!1,reverse:!1,reversedDirection:!1},f=b.children(),h=f.length,i=0,j=[],k=0,l="";if(a.filter=a.filter||!1,$.extend(e,a),e.createColumns){for(i=0;h>i;i++)j[k]=(j[k]||"")+f[i].outerHTML,k++,k===e.cols&&(k=0);for(i=0;i<e.cols;i++)l+=e.columnTemplate.replace("{{ content }}",j[i]);b.html(l),e.columns=b.find(".column")}else e.columns=b.children();return b.data("settings",e),g.on("scroll."+e.namespace,this,d).on("resize."+e.namespace,this,c).on("touchmove."+e.namespace,this,d).trigger("scroll").trigger("resize"),c({data:[this]}),d({data:[this]}),b}function c(){var a=e,b=a.data("settings"),c=0,f=0,h=0,i={left:0};for(b.width=a.width(),b.top=a.offset().top,b.left=a.offset().left,b.win=g.height(),b.winW=g.width(),b.autoWidth&&(i.width=b.width/b.cols+"px"),c=0;c<b.cols;c++)b.columns.eq(c).removeAttr("style").removeClass("is-fixed").removeClass("is-short"),i.marginLeft=h,b.columns.eq(c).css(i),b.columnHeights[c]=b.columns.eq(c).height(),f=Math.max(b.columnHeights[c],f),h+=b.columns.eq(c).width();a.height(f),b.height=a.height(),a.data("settings",b),d.call(a,{data:[a]})}function d(){var a=e,b=a.data("settings"),c=f.scrollY?window.scrollY:g.scrollTop(),d=0;if(b.proportionalScroll){var h=1,i=0,j="";for(d=0;d<b.cols;d++)h=b.columnHeights[d]/b.height,1!==h&&(i=(1-h)*b.height*Math.min(1,Math.max(0,(c-b.top)/(b.height-b.win))),j="translate3d(0px,"+i+"px, 0px)",b.columns.eq(d).css({transform:j,"-webkit-transform":j,"-moz-transform":j,"-ms-transform":j}))}else{if(c<b.top)return b.columns.removeClass("is-fixed").removeClass("is-top-fixed").removeClass("is-short").css({left:0,minHeight:0,top:0}),void a.removeClass("is-scrolled-past");if(c+b.win>b.top+b.height){for(b.columns.removeClass("is-fixed").removeClass("is-top-fixed").css({left:0}),d=0;d<b.cols;d++)b.columnHeights[d]<b.win&&b.columnHeights[d]<b.height&&b.columns.eq(d).css(c+b.columnHeights[d]>b.top+b.height?{top:"auto",bottom:0}:{top:c-b.top});return void a.addClass("is-scrolled-past")}if(a.removeClass("is-scrolled-past"),b.reverse)for(d=0;d<b.cols;d++)b.columnHeights[d]<b.win&&c>b.top?b.columns.eq(d).removeClass("is-bottom-fixed").addClass("is-short").css({left:b.left,top:0}):(b.columns.eq(d).removeClass("is-short").css({left:0,top:0}),c<b.top||(c>b.top+b.height-b.columnHeights[d]?b.columns.eq(d).removeClass("is-top-fixed").css({left:0,top:b.height-b.columnHeights[d]}):b.columnHeights[d]<b.height&&b.columns.eq(d).addClass("is-top-fixed").css({left:b.left})));else for(d=0;d<b.cols;d++)if(b.columnHeights[d]<b.win&&c>b.top)b.columns.eq(d).removeClass("is-fixed").addClass("is-short").css({left:b.left,transform:"none","-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none",top:0});else if(b.columns.eq(d).removeClass("is-short").css({left:0}),!(c<b.top))if(b.reversedDirection&&d%2!==0){var i=2*Math.max(c-b.top,0)+b.win-b.columnHeights[d];i=Math.min(i,-b.win+b.height),j="translate3d(0px,"+i+"px, 0px)",b.columns.eq(d).css({transform:j,"-webkit-transform":j,"-moz-transform":j,"-ms-transform":j})}else c>b.top+b.columnHeights[d]-b.win?b.columns.eq(d).addClass("is-fixed").css({top:"auto",left:b.left}):b.columns.eq(d).removeClass("is-fixed").css({left:0})}}var e=this,f={scrollY:window.scrollY>=0?!0:!1},g=($(document),$("body"),$(window)),h={destroy:function(){var a=this.data("settings");g.off(a.namespace),$(this).removeData("settings"),console.log("destroy called")},update:function(a,b){var c=$(this),d=c.data("settings")||{};d[a]=b,c.data("settings",d)}};if("string"==typeof a&&a in h)return h[a].call(this,arguments.length>1?arguments.slice(1):arguments),!1;return b.call(this,a)},function(a){"use strict";a.zepto&&!a.fn.removeData&&console.log("Error: Zepto is loaded without the data module."),a.fn.columns=function(b){function c(b){b=b||{};var c=this,f={namespace:"columns",height:c.height(),width:c.width(),top:c.offset().top,left:c.offset().left,win:h.height(),winW:h.width(),cols:4,columnHeights:[],columnTemplate:'<div class="column">{{ content }}</div>',autoWidth:!0,createColumns:!0,proportionalScroll:!1,reverse:!1,reversedDirection:!1},g=c.children(),i=g.length,j=0,k=[],l=0,m="";if(b.filter=b.filter||!1,a.extend(f,b),f.createColumns){for(j=0;i>j;j++)k[l]=(k[l]||"")+g[j].outerHTML,l++,l===f.cols&&(l=0);for(j=0;j<f.cols;j++)m+=f.columnTemplate.replace("{{ content }}",k[j]);c.html(m),f.columns=c.find(".column")}else f.columns=c.children();return c.data("settings",f),h.on("scroll."+f.namespace,this,e).on("resize."+f.namespace,this,d).on("touchmove."+f.namespace,this,e).trigger("scroll").trigger("resize"),d({data:[this]}),e({data:[this]}),c}function d(){var a=f,b=a.data("settings"),c=0,d=0,g=0,i={left:0};for(b.width=a.width(),b.top=a.offset().top,b.left=a.offset().left,b.win=h.height(),b.winW=h.width(),b.autoWidth&&(i.width=b.width/b.cols+"px"),c=0;c<b.cols;c++)b.columns.eq(c).removeAttr("style").removeClass("is-fixed").removeClass("is-short"),i.marginLeft=g,b.columns.eq(c).css(i),b.columnHeights[c]=b.columns.eq(c).height(),d=Math.max(b.columnHeights[c],d),g+=b.columns.eq(c).width();a.height(d),b.height=a.height(),a.data("settings",b),e.call(a,{data:[a]})}function e(){var a=f,b=a.data("settings"),c=g.scrollY?window.scrollY:h.scrollTop(),d=0;if(b.proportionalScroll){var e=1,i=0,j="";for(d=0;d<b.cols;d++)e=b.columnHeights[d]/b.height,1!==e&&(i=(1-e)*b.height*Math.min(1,Math.max(0,(c-b.top)/(b.height-b.win))),j="translate3d(0px,"+i+"px, 0px)",b.columns.eq(d).css({transform:j,"-webkit-transform":j,"-moz-transform":j,"-ms-transform":j}))}else{if(c<b.top)return b.columns.removeClass("is-fixed").removeClass("is-top-fixed").removeClass("is-short").css({left:0,minHeight:0,top:0}),void a.removeClass("is-scrolled-past");if(c+b.win>b.top+b.height){for(b.columns.removeClass("is-fixed").removeClass("is-top-fixed").css({left:0}),d=0;d<b.cols;d++)b.columnHeights[d]<b.win&&b.columnHeights[d]<b.height&&b.columns.eq(d).css(c+b.columnHeights[d]>b.top+b.height?{top:"auto",bottom:0}:{top:c-b.top});return void a.addClass("is-scrolled-past")}if(a.removeClass("is-scrolled-past"),b.reverse)for(d=0;d<b.cols;d++)b.columnHeights[d]<b.win&&c>b.top?b.columns.eq(d).removeClass("is-bottom-fixed").addClass("is-short").css({left:b.left,top:0}):(b.columns.eq(d).removeClass("is-short").css({left:0,top:0}),c<b.top||(c>b.top+b.height-b.columnHeights[d]?b.columns.eq(d).removeClass("is-top-fixed").css({left:0,top:b.height-b.columnHeights[d]}):b.columnHeights[d]<b.height&&b.columns.eq(d).addClass("is-top-fixed").css({left:b.left})));else for(d=0;d<b.cols;d++)if(b.columnHeights[d]<b.win&&c>b.top)b.columns.eq(d).removeClass("is-fixed").addClass("is-short").css({left:b.left,transform:"none","-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none",top:0});else if(b.columns.eq(d).removeClass("is-short").css({left:0}),!(c<b.top))if(b.reversedDirection&&d%2!==0){var i=2*Math.max(c-b.top,0)+b.win-b.columnHeights[d];i=Math.min(i,-b.win+b.height),j="translate3d(0px,"+i+"px, 0px)",b.columns.eq(d).css({transform:j,"-webkit-transform":j,"-moz-transform":j,"-ms-transform":j})}else c>b.top+b.columnHeights[d]-b.win?b.columns.eq(d).addClass("is-fixed").css({top:"auto",left:b.left}):b.columns.eq(d).removeClass("is-fixed").css({left:0})}}var f=this,g={scrollY:window.scrollY>=0?!0:!1},h=(a(document),a("body"),a(window)),i={destroy:function(){var b=this.data("settings");h.off(b.namespace),a(this).removeData("settings"),console.log("destroy called")},update:function(b,c){var d=a(this),e=d.data("settings")||{};e[b]=c,d.data("settings",e)}};if("string"==typeof b&&b in i)return i[b].call(this,arguments.length>1?arguments.slice(1):arguments),!1;return c.call(this,b)}}(window.jQuery||window.Zepto);