!function(a){"use strict";a.zepto&&!a.fn.removeData&&console.log("Error: Zepto is loaded without the data module."),a.fn.columns=function(b){function c(b){b=b||{};var c=this,h={height:c.height(),width:c.width(),top:c.offset().top,left:c.offset().left,win:f.height(),cols:4,columnHeights:[],columnTemplate:'<div class="column">{{ content }}</div>',autoWidth:!0,createColumns:!0},i=c.children(),j=i.length,k=0,l=[],m=0,n="";if(b.filter=b.filter||!1,a.extend(h,b),h.createColumns){for(k=0;j>k;k++)l[m]=(l[m]||"")+i[k].outerHTML,m++,m===h.cols&&(m=0);for(k=0;k<h.cols;k++)n+=h.columnTemplate.replace("{{ content }}",l[k]);c.html(n),h.columns=c.find(".column")}else h.columns=c.children();return c.data("settings",h),f.on("scroll"+g,this,e).on("resize"+g,this,d).trigger("scroll").trigger("resize"),console.log(h),c}function d(b){var c=a(b.data[0]),d=c.data("settings"),g=0,h=0,i={left:"50%"};for(d.autoWidth&&(i.width=d.width/d.cols+"px"),g=0;g<d.cols;g++)i.marginLeft=Math.round(1*d.width*((g-d.cols)/d.cols+.5))+"px",d.columns.eq(g).removeClass("is-fixed").removeClass("is-short").css(i),d.columnHeights[g]=d.columns.eq(g).height(),h=Math.max(d.columnHeights[g],h);c.height(h),d.width=c.width(),d.height=c.height(),d.top=c.offset().top,d.win=f.height(),console.log(d),c.data("settings",d),e.call(c,{data:[c]})}function e(b){var c=a(b.data[0]),d=c.data("settings"),e=f.scrollTop(),g=0;if(console.log("on Scroll called"),e+d.win>d.top+d.height)return d.columns.removeClass("is-fixed"),void c.addClass("is-scrolled-past");for(c.removeClass("is-scrolled-past"),g=0;g<d.cols;g++)d.columnHeights[g]<d.win&&e>d.top?d.columns.eq(g).removeClass("is-fixed").addClass("is-short"):(d.columns.eq(g).removeClass("is-short"),e<d.top||(e+d.win-d.top>d.columnHeights[g]?d.columns.eq(g).addClass("is-fixed"):d.columns.eq(g).removeClass("is-fixed")))}var f=(a(document),a("body"),a(window)),g=".columns",h={destroy:function(){a(this).removeData("settings"),f.off(g),console.log("destroy called")},update:function(b,c){var d=a(this),e=d.data("settings")||{};e[b]=c,d.data("settings",e)}};return"string"==typeof b&&b in h?(h[b].call(this,arguments.length>1?arguments.slice(1):arguments),!1):c.call(this,b)}}(window.jQuery||window.Zepto);