!function(a){"use strict";a.zepto&&!a.fn.removeData&&console.log("Error: Zepto is loaded without the data module."),a.fn.columns=function(b){function c(b){b=b||{};var c=this,g={namespace:"columns",height:c.height(),width:c.width(),top:c.offset().top,left:c.offset().left,win:f.height(),winW:f.width(),cols:4,columnHeights:[],columnTemplate:'<div class="column">{{ content }}</div>',autoWidth:!0,createColumns:!0,proportionalScroll:!1,reverse:!1,reversedDirection:!1},h=c.children(),i=h.length,j=0,k=[],l=0,m="";if(b.filter=b.filter||!1,a.extend(g,b),g.createColumns){for(j=0;i>j;j++)k[l]=(k[l]||"")+h[j].outerHTML,l++,l===g.cols&&(l=0);for(j=0;j<g.cols;j++)m+=g.columnTemplate.replace("{{ content }}",k[j]);c.html(m),g.columns=c.find(".column")}else g.columns=c.children();return c.data("settings",g),f.on("scroll."+g.namespace,this,e).on("resize."+g.namespace,this,d).on("touchmove."+g.namespace,this,e).trigger("scroll").trigger("resize"),d({data:[this]}),e({data:[this]}),c}function d(b){var c=a(b.data[0]),d=c.data("settings"),g=0,h=0,i=0,j={left:0};for(d.width=c.width(),d.top=c.offset().top,d.left=c.offset().left,d.win=f.height(),d.winW=f.width(),d.autoWidth&&(j.width=d.width/d.cols+"px"),g=0;g<d.cols;g++)d.columns.eq(g).removeAttr("style").removeClass("is-fixed").removeClass("is-short"),j.marginLeft=i,d.columns.eq(g).css(j),d.columnHeights[g]=d.columns.eq(g).height(),h=Math.max(d.columnHeights[g],h),i+=d.columns.eq(g).width();c.height(h),d.height=c.height(),c.data("settings",d),e.call(c,{data:[c]})}function e(b){var c=a(b.data[0]),d=c.data("settings"),e=window.scrollY,f=0;if(d.proportionalScroll){var g=1,h=0,i="";for(f=0;f<d.cols;f++)g=d.columnHeights[f]/d.height,1!==g&&(h=(1-g)*d.height*Math.min(1,Math.max(0,(e-d.top)/(d.height-d.win))),i="translate3d(0px,"+h+"px, 0px)",d.columns.eq(f).css({transform:i,"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i}))}else{if(e<d.top)return d.columns.removeClass("is-fixed").removeClass("is-top-fixed").removeClass("is-short").css({left:0,minHeight:0,top:0}),void c.removeClass("is-scrolled-past");if(e+d.win>d.top+d.height){for(d.columns.removeClass("is-fixed").removeClass("is-top-fixed").css({left:0}),f=0;f<d.cols;f++)d.columnHeights[f]<d.win&&d.columnHeights[f]<d.height&&d.columns.eq(f).css(e+d.columnHeights[f]>d.top+d.height?{top:"auto",bottom:0}:{top:e-d.top});return void c.addClass("is-scrolled-past")}if(c.removeClass("is-scrolled-past"),d.reverse)for(f=0;f<d.cols;f++)d.columnHeights[f]<d.win&&e>d.top?d.columns.eq(f).removeClass("is-bottom-fixed").addClass("is-short").css({left:d.left,top:0}):(d.columns.eq(f).removeClass("is-short").css({left:0,top:0}),e<d.top||(e>d.top+d.height-d.columnHeights[f]?d.columns.eq(f).removeClass("is-top-fixed").css({left:0,top:d.height-d.columnHeights[f]}):d.columnHeights[f]<d.height&&d.columns.eq(f).addClass("is-top-fixed").css({left:d.left})));else for(f=0;f<d.cols;f++)if(d.columnHeights[f]<d.win&&e>d.top)d.columns.eq(f).removeClass("is-fixed").addClass("is-short").css({left:d.left,transform:"none","-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none",top:0});else if(d.columns.eq(f).removeClass("is-short").css({left:0}),!(e<d.top))if(d.reversedDirection&&f%2!==0){var h=2*Math.max(e-d.top,0)+d.win-d.columnHeights[f];h=Math.min(h,-d.win+d.height),i="translate3d(0px,"+h+"px, 0px)",d.columns.eq(f).css({transform:i,"-webkit-transform":i,"-moz-transform":i,"-ms-transform":i})}else e>d.top+d.columnHeights[f]-d.win?d.columns.eq(f).addClass("is-fixed").css({top:"auto",left:d.left}):d.columns.eq(f).removeClass("is-fixed").css({left:0})}}var f=(a(document),a("body"),a(window)),g={destroy:function(){var b=this.data("settings");f.off(b.namespace),a(this).removeData("settings"),console.log("destroy called")},update:function(b,c){var d=a(this),e=d.data("settings")||{};e[b]=c,d.data("settings",e)}};if("string"==typeof b&&b in g)return g[b].call(this,arguments.length>1?arguments.slice(1):arguments),!1;return c.call(this,b)}}(window.jQuery||window.Zepto);