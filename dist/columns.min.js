!function(a){"use strict";a.zepto&&!a.fn.removeData&&console.log("Error: Zepto is loaded without the data module."),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||!1}(),a.fn.columns=function(b){function c(a,b){a.style.webkitTransform=b,a.style.MozTransform=b,a.style.msTransform=b,a.style.transform=b}function d(b){b=b||{};var c=this,d={namespace:"columns",height:c.height(),width:c.width(),top:c.offset().top,left:c.offset().left,win:p.height(),winW:p.width(),gutterTop:0,cols:4,columnHeights:[],columnTemplate:'<div class="column">{{ content }}</div>',autoWidth:!0,createColumns:!0,requestFrame:!0,destroyed:!1},j=c.children(),k=j.length,l=0,m=[],n=0,q="";if(b.filter=b.filter||!1,a.extend(o,d,b),o.createColumns){for(o.oldHTML=c[0].innerHTML,l=0;k>l;l++)m[n]=(m[n]||"")+j[l].outerHTML,n++,n===o.cols&&(n=0);for(l=0;l<o.cols;l++)m[l]=m[l]||"",q+=o.columnTemplate.replace("{{ content }}",m[l]);c.html(q),o.columns=c.find(".column")}else o.columns=c.children();return c.data("settings",o),window.requestAnimationFrame&&o.requestFrame?(p.on("scroll."+o.namespace,this,g).on("resize."+o.namespace,this,f).on("touchmove."+o.namespace,this,g).trigger("scroll").trigger("resize"),f(),g(),h(),i=requestAnimFrame(e)):(p.on("scroll."+o.namespace,this,h).on("resize."+o.namespace,this,f).on("touchmove."+o.namespace,this,h).trigger("scroll").trigger("resize"),f(),h()),c}function e(){o.destroyed||(h(),i=requestAnimFrame(e))}function f(a){if(j.length){var b=j,c=0,d=0,e=0,f={left:0};if(o){for(o.width=b.width(),o.top=b.offset().top,o.left=b.offset().left,o.win=p.height(),o.winW=p.width(),o.autoWidth&&(f.width=o.width/o.cols+"px"),c=0;c<o.cols;c++)o.columns.eq(c).removeAttr("style").removeClass("is-fixed").removeClass("is-short"),f.marginLeft=e,o.columns.eq(c).css(f),o.columnHeights[c]=o.columns.eq(c).height()+o.gutterTop,d=Math.max(o.columnHeights[c],d),e+=o.columns.eq(c).width();b.height(d),o.height=d,b.data("settings",o),g.call(b,{data:[b]})}}}function g(){n=!0,clearTimeout(m),m=setTimeout(function(){n=!1})}function h(){var a=k.scrollY?window.scrollY:p.scrollTop(),b=0;if(o){var d=1,e=0,f="",g=0;for(b=0;b<o.cols;b++)d=o.columnHeights[b]/o.height,1!==d&&(e=(1-d)*o.height*Math.min(1,Math.max(0,(a-o.top)/(o.height-o.win))),e=Math.round(e),f="translate3d(0px,"+e+"px, 0px)",(a-o.top)/(o.height-o.win)>1&&(f="none",g=e),o.columns.eq(b).get(0).style.top=g+"px",c(o.columns.eq(b).get(0),f))}}var i,j=this,k={scrollY:window.scrollY>=0?!0:!1},l=null,m=null,n=!1,o={},p=(a(document),a("body"),a(window)),q={destroy:function(){o=this.data("settings"),o&&(o.createColumns&&(this[0].innerHTML=o.oldHTML,this[0].setAttribute("style","")),p.off("."+o.namespace),a(this).removeData("settings"),clearTimeout(l),"cancelAnimationFrame"in window&&window.cancelAnimationFrame(i),o.destroyed=!0)},softDestroy:function(){o=this.data("settings"),o&&(p.off("."+o.namespace),a(this).removeData("settings"),clearTimeout(l),"cancelAnimationFrame"in window&&window.cancelAnimationFrame(i))},update:function(b,c){var d=a(this);o=o||d.data("settings")||{},o[b]=c,d.data("settings",o)},resize:function(){f()}};if("string"==typeof b&&b in q)return q[b].call(this,arguments.length>1?arguments.slice(1):arguments),j;return d.call(this,b)}}(window.jQuery||window.Zepto);